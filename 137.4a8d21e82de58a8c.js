"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[137],{2137:(Za,C,n)=>{n.r(C),n.d(C,{GestionarAsignaturaModule:()=>fa});var c=n(6814),T=n(7586),u=n(6223),a=n(8926),g=n(5118),p=n(5116),x=n(6732),m=n(7728),N=n(7870),q=n(8516),h=n(5167),f=n(5219),_=n(707),A=n(4055),Z=n(3965),U=n(3714);function J(e,s){if(1&e&&(a.TgZ(0,"div")(1,"p",10),a._uU(2),a.qZA()()),2&e){const t=s.$implicit;a.xp6(2),a.Oqu(t.nombre)}}function I(e,s){if(1&e&&(a.TgZ(0,"div",7)(1,"div",8)(2,"label",9),a._uU(3,"Facultad"),a.qZA(),a.TgZ(4,"p",10),a._uU(5),a.qZA()(),a.TgZ(6,"div",8)(7,"label",9),a._uU(8,"Programa"),a.qZA(),a.TgZ(9,"p",10),a._uU(10),a.qZA()(),a.TgZ(11,"div",8)(12,"label",9),a._uU(13,"C\xf3digo asignatura"),a.qZA(),a.TgZ(14,"p",10),a._uU(15),a.qZA()(),a.TgZ(16,"div",8)(17,"label",9),a._uU(18,"OID asignatura"),a.qZA(),a.TgZ(19,"p",10),a._uU(20),a.qZA()(),a.TgZ(21,"div",8)(22,"label",9),a._uU(23,"Asignatura"),a.qZA(),a.TgZ(24,"p",10),a._uU(25),a.qZA()(),a.TgZ(26,"div",8)(27,"label",9),a._uU(28,"Semestre"),a.qZA(),a.TgZ(29,"p",10),a._uU(30),a.qZA()(),a.TgZ(31,"div",8)(32,"label",9),a._uU(33,"Horas por semana"),a.qZA(),a.TgZ(34,"p",10),a._uU(35),a.qZA()(),a.TgZ(36,"div",8)(37,"label",9),a._uU(38,"P\xe9nsum"),a.qZA(),a.TgZ(39,"p",10),a._uU(40),a.qZA()(),a.TgZ(41,"div",8)(42,"label",9),a._uU(43,"Agrupadores"),a.qZA(),a.YNc(44,J,3,1,"div",11),a.qZA()()),2&e){const t=a.oxw();a.xp6(5),a.Oqu(t.asignatura.nombreFacultad),a.xp6(5),a.Oqu(t.asignatura.nombrePrograma),a.xp6(5),a.Oqu(t.asignatura.codigoAsignatura),a.xp6(5),a.Oqu(t.asignatura.oid),a.xp6(5),a.Oqu(t.asignatura.nombre),a.xp6(5),a.Oqu(t.asignatura.semestre),a.xp6(5),a.Oqu(t.asignatura.horasSemana),a.xp6(5),a.Oqu(t.asignatura.pensum),a.xp6(4),a.Q6J("ngForOf",null==t.asignatura?null:t.asignatura.agrupadores)}}function M(e,s){if(1&e&&(a.TgZ(0,"div",28)(1,"div")(2,"strong"),a._uU(3),a.qZA(),a._uU(4),a.qZA()()),2&e){const t=s.$implicit;a.xp6(3),a.Oqu(t.abreviatura),a.xp6(1),a.hij("-",t.nombre,"")}}function j(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," Facultad es obligatorio "),a.qZA())}function w(e,s){if(1&e&&(a.TgZ(0,"div",28)(1,"div")(2,"strong"),a._uU(3),a.qZA(),a._uU(4),a.qZA()()),2&e){const t=s.$implicit;a.xp6(3),a.Oqu(t.abreviatura),a.xp6(1),a.hij("-",t.nombre,"")}}function y(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," Programa es obligatorio "),a.qZA())}function Y(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," C\xf3digo asignatura es obligatorio "),a.qZA())}function O(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," OID asignatura es obligatorio "),a.qZA())}function Q(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," Nombre asignatura es obligatorio "),a.qZA())}function V(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," Semestre es obligatorio "),a.qZA())}function k(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," Horas por semana es obligatorio "),a.qZA())}function D(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," Pensum es obligatorio "),a.qZA())}function L(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," Aplica espacio f\xedsico secundario es obligatorio "),a.qZA())}function G(e,s){1&e&&(a.TgZ(0,"small",29),a._uU(1," Agrupadores es obligatorio "),a.qZA())}const d=function(e){return{"ng-invalid ng-dirty":e}};function R(e,s){if(1&e){const t=a.EpF();a.TgZ(0,"form",12)(1,"div",13)(2,"label",14),a._uU(3,"Facultad"),a.qZA(),a.TgZ(4,"p-dropdown",15),a.NdJ("ngModelChange",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.onFacultadChange())}),a.YNc(5,M,5,2,"ng-template",16),a.qZA(),a.YNc(6,j,2,0,"small",17),a.qZA(),a.TgZ(7,"div",13)(8,"label",14),a._uU(9,"Programa"),a.qZA(),a.TgZ(10,"p-dropdown",18),a.YNc(11,w,5,2,"ng-template",16),a.qZA(),a.YNc(12,y,2,0,"small",17),a.qZA(),a.TgZ(13,"div",13)(14,"label",14),a._uU(15,"C\xf3digo de asignatura"),a.qZA(),a._UZ(16,"input",19),a.YNc(17,Y,2,0,"small",17),a.qZA(),a.TgZ(18,"div",13)(19,"label",14),a._uU(20,"OID asignatura"),a.qZA(),a._UZ(21,"input",20),a.YNc(22,O,2,0,"small",17),a.qZA(),a.TgZ(23,"div",13)(24,"label",14),a._uU(25,"Nombre asignatura"),a.qZA(),a._UZ(26,"input",21),a.YNc(27,Q,2,0,"small",17),a.qZA(),a.TgZ(28,"div",13)(29,"label",14),a._uU(30,"Semestre"),a.qZA(),a._UZ(31,"p-inputNumber",22),a.YNc(32,V,2,0,"small",17),a.qZA(),a.TgZ(33,"div",13)(34,"label",14),a._uU(35,"Horas por semana"),a.qZA(),a._UZ(36,"input",23),a.YNc(37,k,2,0,"small",17),a.qZA(),a.TgZ(38,"div",13)(39,"label",14),a._uU(40,"Pensum"),a.qZA(),a._UZ(41,"input",24),a.YNc(42,D,2,0,"small",17),a.qZA(),a.TgZ(43,"div",13)(44,"label",14),a._uU(45,"\xbfAplica E.F secundario?"),a.qZA(),a._UZ(46,"p-dropdown",25),a.YNc(47,L,2,0,"small",17),a.qZA(),a.TgZ(48,"div",26)(49,"label",14),a._uU(50,"Agrupadores"),a.qZA(),a._UZ(51,"p-multiSelect",27),a.YNc(52,G,2,0,"small",17),a.qZA()()}if(2&e){const t=a.oxw();a.Q6J("formGroup",t.formulario),a.xp6(4),a.Q6J("placeholder"," ")("ngClass",a.VKq(35,d,t.idFacultad().invalid&&t.idFacultad().touched))("options",t.lstFacultadOutDTO)("showClear",!0),a.xp6(2),a.Q6J("ngIf",t.idFacultad().invalid&&t.idFacultad().touched),a.xp6(4),a.Q6J("placeholder"," ")("options",t.listaProgramas)("showClear",!0)("ngClass",a.VKq(37,d,t.idPrograma().invalid&&t.idPrograma().touched)),a.xp6(2),a.Q6J("ngIf",t.idPrograma().invalid&&t.idPrograma().touched),a.xp6(4),a.Q6J("ngClass",a.VKq(39,d,t.codigoAsignatura().invalid&&t.codigoAsignatura().touched)),a.xp6(1),a.Q6J("ngIf",t.codigoAsignatura().invalid&&t.codigoAsignatura().touched),a.xp6(4),a.Q6J("ngClass",a.VKq(41,d,t.OID().invalid&&t.OID().touched)),a.xp6(1),a.Q6J("ngIf",t.OID().invalid&&t.OID().touched),a.xp6(4),a.Q6J("ngClass",a.VKq(43,d,t.nombre().invalid&&t.nombre().touched)),a.xp6(1),a.Q6J("ngIf",t.nombre().invalid&&t.nombre().touched),a.xp6(4),a.Q6J("ngClass",a.VKq(45,d,t.semestre().invalid&&t.semestre().touched))("step",1)("showButtons",!0)("min",1)("max",10),a.xp6(1),a.Q6J("ngIf",t.semestre().invalid&&t.semestre().touched),a.xp6(4),a.Q6J("ngClass",a.VKq(47,d,t.horasSemana().invalid&&t.horasSemana().touched)),a.xp6(1),a.Q6J("ngIf",t.horasSemana().invalid&&t.horasSemana().touched),a.xp6(4),a.Q6J("ngClass",a.VKq(49,d,t.pensum().invalid&&t.pensum().touched)),a.xp6(1),a.Q6J("ngIf",t.pensum().invalid&&t.pensum().touched),a.xp6(4),a.Q6J("options",t.opcionesHabilitado),a.xp6(1),a.Q6J("ngIf",t.aplicaEspacioSecundario().invalid&&t.aplicaEspacioSecundario().touched),a.xp6(4),a.Q6J("defaultLabel","Seleccione grupo")("options",t.listaAgrupadores)("filter",!1)("showClear",!0)("ngClass",a.VKq(51,d,t.agrupador().invalid&&t.agrupador().touched)),a.xp6(1),a.Q6J("ngIf",t.agrupador().invalid&&t.agrupador().touched)}}function H(e,s){if(1&e){const t=a.EpF();a.TgZ(0,"button",30),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.guardarAsignatura())}),a.qZA()}}let b=(()=>{class e{constructor(t,i,r,o,l,v,_a,Aa){this.ref=t,this.config=i,this.asignaturaService=r,this.fb=o,this.facultadService=l,this.programaService=v,this.sharedService=_a,this.messageSerivce=Aa,this.opcionesHabilitado=[{label:"S\xed",value:!0},{label:"No",value:!1}],this.lstFacultadOutDTO=[]}ngOnInit(){this.lectura=this.config.data.lectura,this.obtenerFacultades(),this.inicializarFormulario(),this.config.data?.id&&this.asignaturaService.consultarAsignaturaPorId(this.config.data.id).subscribe(t=>{this.asignatura=t,this.lectura?this.agruparGruposPorFacultad():this.asignarDatosFormulario()})}asignarDatosFormulario(){this.nombre().setValue(this.asignatura.nombre),this.codigoAsignatura().setValue(this.asignatura.codigoAsignatura),this.OID().setValue(this.asignatura.oid),this.semestre().setValue(this.asignatura.semestre),this.pensum().setValue(this.asignatura.pensum),this.horasSemana().setValue(this.asignatura.horasSemana),this.idPrograma().setValue(this.asignatura.idPrograma),this.idFacultad().setValue(this.asignatura.idFacultad),this.aplicaEspacioSecundario().setValue(this.asignatura.aplicaEspacioSecundario),this.agrupador().setValue(this.asignatura.agrupadores.map(t=>t.idAgrupadorEspacioFisico))}agruparGruposPorFacultad(){const t=this.asignatura.agrupadores.reduce((i,r)=>{const o=i.find(l=>l.idFacultad===r.idFacultad);return o?o.agrupadorDTOs.push(r):i.push({idFacultad:r.idFacultad,nombreFacultad:r.nombreFacultad,agrupadorDTOs:[r]}),i},[]);this.agrupadores=t}obtenerGrupoSeleccionado(t){t&&(this.idGrupoSeleccionado=t.map(i=>i.idAgrupadorEspacioFisico))}obtenerFacultades(){this.facultadService.consultarFacultades().subscribe(t=>{this.lstFacultadOutDTO=t.map(i=>({abreviatura:i.abreviatura,nombre:i.nombre,idFacultad:i.idFacultad}))},t=>{console.error(t)})}inicializarFormulario(){this.formulario=this.fb.group({nombre:[{value:null},u.kI.required],codigoAsignatura:[{value:null},u.kI.required],oid:[{value:null}],semestre:[{value:null},u.kI.required],pensum:[{value:null},u.kI.required],horasSemana:[{value:null},u.kI.required],idPrograma:[{value:null},u.kI.required],lstIdAgrupadorEspacioFisico:[{value:null},u.kI.required],idFacultad:[{value:""},u.kI.required],aplicaEspacioSecundario:[{value:null},u.kI.required],agrupadoresSeleccionados:[{value:""},u.kI.required]})}onFacultadChange(){if(null!==this.idFacultad().value){this.programaService.consultarProgramasPorIdFacultad([this.idFacultad().value]).subscribe(i=>{this.listaProgramas=i},i=>{console.error(i)});let t=[];t.push(this.idFacultad().value),this.sharedService.obtenerAgrupadorEspacioFisico(t).subscribe(i=>{this.listaAgrupadores=i})}else this.limpiar()}limpiar(){this.formulario.reset(),this.listaAgrupadores=[]}guardarAsignatura(){this.formulario.get("lstIdAgrupadorEspacioFisico").setValue(this.agrupador().value),this.formulario.valid?(this.asignatura=this.formulario.value,this.asignatura.idAsignatura=this.config.data?.id,this.asignaturaService.guardarAsignatura(this.asignatura).subscribe({next:t=>{this.messageSerivce.showMessage("success","Asignatura guardada"),this.ref.close(),console.log(t)},error:t=>{this.messageSerivce.showMessage("error","Error al guardar"),console.log(t)}})):this.formulario.markAllAsTouched()}salir(){this.ref.close()}idFacultad(){return this.formulario.get("idFacultad")}idPrograma(){return this.formulario.get("idPrograma")}nombre(){return this.formulario.get("nombre")}codigoAsignatura(){return this.formulario.get("codigoAsignatura")}OID(){return this.formulario.get("oid")}semestre(){return this.formulario.get("semestre")}pensum(){return this.formulario.get("pensum")}horasSemana(){return this.formulario.get("horasSemana")}agrupador(){return this.formulario.get("agrupadoresSeleccionados")}aplicaEspacioSecundario(){return this.formulario.get("aplicaEspacioSecundario")}static#a=this.\u0275fac=function(i){return new(i||e)(a.Y36(g.E7),a.Y36(g.S),a.Y36(p.x),a.Y36(u.qu),a.Y36(x.U),a.Y36(m.o),a.Y36(N.F),a.Y36(q.M))};static#t=this.\u0275cmp=a.Xpm({type:e,selectors:[["app-crear-editar-asignatura"]],decls:7,vars:3,consts:[[1,"flex","flex-column"],["class","grid",4,"ngIf"],["class","grid",3,"formGroup",4,"ngIf"],[1,"flex","justify-content-end",2,"width","100%"],[1,"m-1"],["pButton","","pRipple","","label","Salir","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Guardar","icon","pi pi-plus","class","p-button-text ml-2",3,"click",4,"ngIf"],[1,"grid"],[1,"p-fluid","col-12","flex"],[1,"col-12","md:col-2"],[1,"label","col-12","md:col-6"],[4,"ngFor","ngForOf"],[1,"grid",3,"formGroup"],[1,"p-fluid","col","sm:col-12","md:col-6"],[1,"required"],["optionValue","idFacultad","optionLabel","abreviatura","formControlName","idFacultad","appendTo","body",3,"placeholder","ngClass","options","showClear","ngModelChange"],["pTemplate","item"],["class","p-error block fade-in",4,"ngIf"],["optionValue","idPrograma","optionLabel","abreviatura","formControlName","idPrograma","appendTo","body",3,"placeholder","options","showClear","ngClass"],["type","text","pInputText","","formControlName","codigoAsignatura","placeholder"," ",3,"ngClass"],["type","text","pInputText","","formControlName","oid",3,"ngClass"],["type","text","pInputText","","formControlName","nombre",3,"ngClass"],["formControlName","semestre",3,"ngClass","step","showButtons","min","max"],["type","text","pInputText","","formControlName","horasSemana",3,"ngClass"],["type","text","pInputText","","formControlName","pensum",3,"ngClass"],["optionLabel","label","optionValue","value","placeholder","Seleccione","formControlName","aplicaEspacioSecundario",3,"options"],[1,"p-fluid","sm:col-12","md:col-6"],["maxSelectedLabels","4","optionLabel","abreviatura","formControlName","agrupadoresSeleccionados","optionLabel","nombre","optionValue","idAgrupadorEspacioFisico","appendTo","body",3,"defaultLabel","options","filter","showClear","ngClass"],[1,"flex","align-items-center","gap-2"],[1,"p-error","block","fade-in"],["pButton","","pRipple","","label","Guardar","icon","pi pi-plus",1,"p-button-text","ml-2",3,"click"]],template:function(i,r){1&i&&(a.TgZ(0,"div",0),a.YNc(1,I,45,9,"div",1),a.YNc(2,R,53,53,"form",2),a.TgZ(3,"div",3)(4,"div",4)(5,"button",5),a.NdJ("click",function(){return r.salir()}),a.qZA(),a.YNc(6,H,1,0,"button",6),a.qZA()()()),2&i&&(a.xp6(1),a.Q6J("ngIf",r.lectura),a.xp6(1),a.Q6J("ngIf",!r.lectura),a.xp6(4),a.Q6J("ngIf",!r.lectura))},dependencies:[c.mk,c.sg,c.O5,h.Rn,f.jx,u._Y,u.Fj,u.JJ,u.JL,_.Hq,A.NU,Z.Lt,u.sg,u.u,U.o]})}return e})();var K=n(8055),z=n(3999),S=n(9552),F=n(1312),P=n(4104),E=n(3722),$=n(6340),X=n(3259),W=n(3904);const aa=["fileUpload"];function ta(e,s){if(1&e&&(a.TgZ(0,"div",23)(1,"div")(2,"strong"),a._uU(3),a.qZA(),a._uU(4),a.qZA()()),2&e){const t=s.$implicit;a.xp6(3),a.Oqu(t.abreviatura),a.xp6(1),a.hij("-",t.nombre,"")}}function ea(e,s){}function ia(e,s){if(1&e){const t=a.EpF();a.TgZ(0,"button",24),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.cargarArchivo())}),a.qZA(),a._UZ(1,"span",25),a.TgZ(2,"div",26)(3,"button",27),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.registrarAsignatura())}),a.qZA()()}}function ra(e,s){1&e&&(a.TgZ(0,"tr")(1,"th"),a._uU(2," Programa "),a.qZA(),a.TgZ(3,"th"),a._uU(4," Semestre "),a.qZA(),a.TgZ(5,"th"),a._uU(6," Asignatura "),a.qZA(),a.TgZ(7,"th"),a._uU(8," C\xf3digo "),a.qZA(),a.TgZ(9,"th"),a._uU(10," Horas por semana "),a.qZA(),a.TgZ(11,"th"),a._uU(12," P\xe9nsum "),a.qZA(),a.TgZ(13,"th"),a._uU(14," Estado "),a.qZA(),a.TgZ(15,"th",28),a._uU(16," Opciones "),a.qZA()())}function na(e,s){if(1&e){const t=a.EpF();a.TgZ(0,"tr")(1,"td",29),a._uU(2),a.qZA(),a.TgZ(3,"td",29),a._uU(4),a.qZA(),a.TgZ(5,"td",29),a._uU(6),a.qZA(),a.TgZ(7,"td",29),a._uU(8),a.qZA(),a.TgZ(9,"td",29),a._uU(10),a.qZA(),a.TgZ(11,"td",29),a._uU(12),a.qZA(),a.TgZ(13,"td",29),a._uU(14),a.qZA(),a.TgZ(15,"td")(16,"div",30)(17,"button",31),a.NdJ("click",function(){const o=a.CHM(t).$implicit,l=a.oxw();return a.KtG(l.verAsignatura(o.idAsignatura))}),a.qZA(),a._UZ(18,"span",25),a.TgZ(19,"button",32),a.NdJ("click",function(){const o=a.CHM(t).$implicit,l=a.oxw();return a.KtG(l.editarAsignatura(o.idAsignatura))}),a.qZA(),a._UZ(20,"span",25),a.TgZ(21,"button",33),a.NdJ("click",function(){const o=a.CHM(t).$implicit,l=a.oxw();return a.KtG(l.inactivarAsignatura(o))}),a.qZA()()()()}if(2&e){const t=s.$implicit;a.xp6(2),a.hij(" ",t.nombrePrograma," "),a.xp6(2),a.hij(" ",t.semestre," "),a.xp6(2),a.hij(" ",t.nombre," "),a.xp6(2),a.hij(" ",t.codigoAsignatura," "),a.xp6(2),a.hij(" ",t.horasSemana," "),a.xp6(2),a.hij(" ",t.pensum," "),a.xp6(2),a.hij(" ",t.estado," ")}}function oa(e,s){1&e&&(a.TgZ(0,"tr")(1,"td",34),a._uU(2," Aun no existen asignaturas "),a.qZA()())}function sa(e,s){if(1&e){const t=a.EpF();a.TgZ(0,"button",35),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.cancelar())}),a.qZA(),a.TgZ(1,"button",36),a.NdJ("click",function(){a.CHM(t);const r=a.oxw();return a.KtG(r.cargar())}),a.qZA()}if(2&e){const t=a.oxw();a.xp6(1),a.Q6J("disabled",!t.base64String)}}const B=function(){return{"w-30rem":!0}},la=function(){return{"line-height":"1.2px"}},ua=function(){return{background:"none",border:"none",margin:"0",padding:"0"}},da=function(){return{width:"450px"}},ca=[{path:"",component:(()=>{class e{constructor(t,i,r,o,l,v){this.dialog=t,this.asignaturaService=i,this.programaService=r,this.confirmationService=o,this.mensageService=l,this.translateService=v,this.mostrarDialogoBandera=!1,this.listaProgramas=[],this.programasSeleccionados=[],this.listaEstados=[],this.asignaturas=[{}]}ngOnInit(){this.listaEstadosCrear(),this.listarAsignaturasBase(),this.programaService.consultarProgramasPermitidosPorUsuario().subscribe(t=>{0===t.length?this.listaProgramas=[]:(this.listaProgramas=t,this.cargando=!0,this.filtro={pageNumber:0,pageSize:10,idProgramas:this.listaProgramas.map(i=>i.idPrograma),semestre:this.numeroSemestre,estado:this.estado},this.asignaturaService.filtrarAsignaturas(this.filtro).subscribe(i=>{this.asignaturas=i.content,this.totalRecords=i.totalElements,this.cargando=!1}))},t=>{console.error(t)})}listaEstadosCrear(){Object.keys(K.r).forEach(t=>{const i=this.translateService.instant("estado."+t);this.listaEstados.push({label:i,value:t})})}listarAsignaturasBase(){this.cargando=!0,this.filtro={pageNumber:0,pageSize:10,idProgramas:this.programasSeleccionados,semestre:this.numeroSemestre,estado:this.estado},this.asignaturaService.filtrarAsignaturas(this.filtro).subscribe(t=>{this.asignaturas=t.content,this.totalRecords=t.totalElements,this.cargando=!1})}listarAsignaturas(t){this.filtro={pageNumber:Math.floor(t.first/t.rows),pageSize:t.rows,idProgramas:this.programasSeleccionados,semestre:this.numeroSemestre,estado:this.estado},this.asignaturaService.filtrarAsignaturas(this.filtro).subscribe(i=>{this.asignaturas=i.content,this.totalRecords=i.totalElements,this.cargando=!1})}verAsignatura(t){this.dialog.open(b,{height:"auto",width:"800px",header:"Informaci\xf3n asignatura",closable:!1,data:{id:t,lectura:!0}})}editarAsignatura(t){this.dialog.open(b,{height:"auto",width:"800px",header:"Editar asignatura",closable:!1,data:{id:t,lectura:!1}}).onClose.subscribe(r=>{this.listarAsignaturasBase()})}inactivarAsignatura(t){this.confirmationService.confirm({message:`\xbfEst\xe1 seguro que desea ${"ACTIVO"==t.estado?"inactiva":"activar"} la asignatura?`,header:"Confirmar",icon:"pi pi-exclamation-triangle",accept:()=>{this.asignaturaService.inactivarAsignatura(t.idAsignatura).subscribe({next:i=>{i&&(this.mensageService.showMessage("success","Asignatura "+("ACTIVO"==t.estado?"inactivada":"activada")),this.listarAsignaturasBase())},error:()=>{this.mensageService.showMessage("error","Error al inactivar")}})},reject:()=>{this.mensageService.showMessage("error","Inactivado cancelado")}})}registrarAsignatura(){this.dialog.open(b,{height:"auto",width:"800px",header:"Registrar asignatura",closable:!1,data:{lectura:!1}}).onClose.subscribe(i=>{this.listarAsignaturasBase()})}cargarArchivo(){this.mostrarDialogoBandera=!0}onEstadoChange(){}limpiar(){this.programasSeleccionados=null,this.numeroSemestre=null}onProgramasChange(){this.listarAsignaturasBase()}onSemestreChange(){this.listarAsignaturasBase()}cancelar(){this.mostrarDialogoBandera=!1,this.base64String=null,this.fileUpload.clear()}cargar(){this.asignaturaService.cargaMasiva({base64:this.base64String}).subscribe(t=>{t&&!t.error?(this.cancelar(),this.mensageService.showMessage("success","Asignaturas guardadas correctamente"),this.listarAsignaturasBase()):(this.cancelar(),this.mensageService.showMessage("error",t.descripcion))})}onUpload(t){const i=t.files[0],r=new FileReader;r.onload=o=>{this.base64String=o.target.result.split(",")[1]},r.readAsDataURL(i)}static#a=this.\u0275fac=function(i){return new(i||e)(a.Y36(g.xA),a.Y36(p.x),a.Y36(m.o),a.Y36(f.YP),a.Y36(q.M),a.Y36(z.sK))};static#t=this.\u0275cmp=a.Xpm({type:e,selectors:[["app-bandeja-principal-asignatura"]],viewQuery:function(i,r){if(1&i&&a.Gf(aa,5),2&i){let o;a.iGM(o=a.CRH())&&(r.fileUpload=o.first)}},decls:37,vars:42,consts:[[1,"grid"],[1,"col-12"],[1,"grid",2,"width","100%"],[1,"p-fluid","col","sm:col-12","md:col-3"],[2,"text-align","right"],["maxSelectedLabels","4","selectedItemsLabel","{0} Programas seleccionados","optionLabel","abreviatura","optionValue","idPrograma","appendTo","body",3,"defaultLabel","options","ngModel","ngClass","filter","showClear","disabled","ngModelChange"],["pTemplate","item"],[3,"placeholder","step","showButtons","min","max","showClear","disabled","ngModel","ngModelChange"],[1,"w-6rem","align-self-center",2,"text-align","right"],["placeholder","Seleccione estado docente",3,"ngClass","options","ngModel","showClear","disabled","ngModelChange"],[1,"flex","justify-content-end",2,"width","100%"],["styleClass","mb-1"],["pTemplate","left"],["pTemplate","right"],["responsiveLayout","scroll","styleClass","p-datatable-gridlines","dataKey","idAsignatura",3,"value","lazy","paginator","rows","totalRecords","loading","onLazyLoad"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["header","Carga masiva",3,"visible","modal","visibleChange"],[1,"flex","align-items-center","justify-content-center",2,"width","400px"],["name","basic","accept",".xlsx, .xls","maxFileSize","1000000","customUpload","true",3,"showCancelButton","onUpload","uploadHandler"],["fileUpload",""],["pTemplate","footer"],[1,"flex","align-items-center","gap-2"],["pButton","","pRipple","","label","Subir archivo","icon","pi pi-upload",1,"p-button-help",3,"click"],[2,"margin-right","10px"],[1,"my-0"],["pButton","","pRipple","","label","Crear asignatura","icon","pi pi-plus",1,"p-button-success","mr-2",3,"click"],[2,"width","10%"],[2,"width","20%"],[1,"flex"],["pButton","","pRipple","","type","button","icon","pi pi-search","pTooltip","Ver asignatura",1,"p-button-rounded","p-button-info",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-pencil","pTooltip","Editar asignatura",1,"p-button-rounded","p-button-secondary",3,"click"],["pButton","","pRipple","","type","button","icon","pi pi-ban","pTooltip","Inactivar/Activar asignatura",1,"p-button-rounded","p-button-danger",3,"click"],["colspan","8"],["pButton","","pRipple","","icon","pi pi-times","label","Cancelar",1,"p-button-text",3,"click"],["pButton","","pRipple","","icon","pi pi-check","label","Cargar",1,"p-button-text",3,"disabled","click"]],template:function(i,r){1&i&&(a._UZ(0,"p-toast"),a.TgZ(1,"div",0)(2,"div",1)(3,"h3"),a._uU(4,"Gestionar asignaturas"),a.qZA(),a.TgZ(5,"p"),a._uU(6,"Esta pantalla permite la creaci\xf3n, visualizaci\xf3n, edici\xf3n y eliminaci\xf3n manual de asignaturas."),a.qZA(),a._UZ(7,"hr"),a.qZA()(),a.TgZ(8,"div",2)(9,"div",3)(10,"label",4),a._uU(11,"Programa"),a.qZA(),a.TgZ(12,"p-multiSelect",5),a.NdJ("ngModelChange",function(l){return r.programasSeleccionados=l})("ngModelChange",function(){return r.onProgramasChange()}),a.YNc(13,ta,5,2,"ng-template",6),a.qZA()(),a.TgZ(14,"div",3)(15,"label",4),a._uU(16,"Semestre"),a.qZA(),a.TgZ(17,"p-inputNumber",7),a.NdJ("ngModelChange",function(l){return r.numeroSemestre=l})("ngModelChange",function(){return r.onSemestreChange()}),a.qZA()(),a.TgZ(18,"div",3)(19,"label",8),a._uU(20,"Estado"),a.qZA(),a.TgZ(21,"p-dropdown",9),a.NdJ("ngModelChange",function(l){return r.estado=l})("ngModelChange",function(){return r.listarAsignaturasBase()}),a.qZA()()(),a.TgZ(22,"div",10)(23,"div")(24,"p-toolbar",11),a.YNc(25,ea,0,0,"ng-template",12),a.YNc(26,ia,4,0,"ng-template",13),a.qZA()()(),a.TgZ(27,"p-table",14),a.NdJ("onLazyLoad",function(l){return r.listarAsignaturas(l)}),a.YNc(28,ra,17,0,"ng-template",15),a.YNc(29,na,22,7,"ng-template",16),a.YNc(30,oa,3,0,"ng-template",17),a.qZA(),a._UZ(31,"p-confirmDialog"),a.TgZ(32,"p-dialog",18),a.NdJ("visibleChange",function(l){return r.mostrarDialogoBandera=l}),a.TgZ(33,"div",19)(34,"p-fileUpload",20,21),a.NdJ("onUpload",function(l){return r.onUpload(l)})("uploadHandler",function(l){return r.onUpload(l)}),a.qZA()(),a.YNc(36,sa,2,1,"ng-template",22),a.qZA()),2&i&&(a.xp6(12),a.Q6J("defaultLabel",0===r.listaProgramas.length?"":"Seleccione programas")("options",r.listaProgramas)("ngModel",r.programasSeleccionados)("ngClass",a.DdM(37,B))("filter",!1)("showClear",!0)("disabled",!1),a.xp6(5),a.Q6J("placeholder","Ingrese semestre")("step",1)("showButtons",!0)("min",1)("max",10)("showClear",!0)("disabled",!1)("ngModel",r.numeroSemestre),a.xp6(4),a.Akn(a.DdM(38,la)),a.Q6J("ngClass",a.DdM(39,B))("options",r.listaEstados)("ngModel",r.estado)("showClear",!0)("disabled",!1),a.xp6(2),a.Tol(void 0!==r.totalRecords?"col-6":"col-12"),a.xp6(1),a.Akn(a.DdM(40,ua)),a.xp6(3),a.Q6J("value",r.asignaturas)("lazy",!0)("paginator",!0)("rows",10)("totalRecords",r.totalRecords)("loading",r.cargando),a.xp6(5),a.Akn(a.DdM(41,da)),a.Q6J("visible",r.mostrarDialogoBandera)("modal",!0),a.xp6(2),a.Q6J("showCancelButton",!1))},dependencies:[c.mk,h.Rn,f.jx,u.JJ,u.On,S.iA,_.Hq,F.V,A.NU,Z.Lt,P.FN,E.p,$.o,X.u,W.Q]})}return e})()}];let ga=(()=>{class e{static#a=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=a.oAB({type:e});static#e=this.\u0275inj=a.cJS({imports:[T.Bz.forChild(ca),T.Bz]})}return e})();var pa=n(6208),ma=n(7161),ha=n(1702);let fa=(()=>{class e{static#a=this.\u0275fac=function(i){return new(i||e)};static#t=this.\u0275mod=a.oAB({type:e});static#e=this.\u0275inj=a.cJS({providers:[g.xA,x.U,m.o,p.x],imports:[c.ez,ga,h.L$,u.u5,S.U$,_.hJ,F.S,A.q4,Z.kW,u.UX,U.j,pa.m,ma.O,P.EV,E.O,ha.g]})}return e})()}}]);